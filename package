#!/usr/bin/env ruby

Kernel.trap('INT')  { STDERR.puts "Interrupt"    ; exit }
Kernel.trap('HUP')  { STDERR.puts "Hangup"       ; exit }
Kernel.trap('PIPE') { STDERR.puts "Pipe Closed"  ; exit }

$LOAD_PATH.unshift "#{ENV['HOME']}/WorkProjects/offline-ingest/lib/"

require 'offin/packages'

# Errno::ECONNREFUSED Connection Refused - processing exception


directory = ARGV[0] || Utils.ingest_usage

config  = Datyl::Config.new("#{ENV['HOME']}/WorkProjects/offline-ingest/config.yml", "default", "i7d")
factory = PackageFactory.new(config)
package = factory.new_package(directory)
